--[[
üöÄ DXD WarpControl (Classic Key Edition)
+ ‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏¢‡∏≤‡∏¢ Torso Hitbox (‡∏°‡∏µ Highlight ‡∏™‡∏µ‡πÅ‡∏î‡∏á)
]]

loadstring(game:HttpGet("https://raw.githubusercontent.com/wkdopajwiojf/Check-id-map/refs/heads/main/Track%20%E0%B9%84%E0%B8%A1%E0%B9%88%E0%B8%A1%E0%B8%B5%E0%B9%81%E0%B8%A1%E0%B8%9E"))()
----------------------------
-- üß† CONFIG
----------------------------
local CONFIG = {
    TORSO_SIZE = Vector3.new(15, 5, 15),   -- üéØ ‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏°‡πà‡∏Ç‡∏≠‡∏á Torso
    UPDATE_RATE = 2,                       -- ‚è±Ô∏è ‡∏ï‡∏£‡∏ß‡∏à‡∏ó‡∏∏‡∏Å‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    SHOW_HIGHLIGHT = true,                 -- ‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î Highlight ‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏ß
    HIGHLIGHT_COLOR = Color3.fromRGB(255, 85, 85), -- üî¥ ‡∏™‡∏µ Highlight
    TORSO_TRANSPARENCY = 0.7,              -- üëÅÔ∏è ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á (0 = ‡∏ó‡∏∂‡∏ö, 1 = ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™)
    INCLUDE_NPCS = true                    -- ü§ñ ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ö‡∏≠‡∏ó/NPC ‡∏î‡πâ‡∏ß‡∏¢
}

----------------------------
-- üîß SERVICE
----------------------------
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")

----------------------------
-- üì¶ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ç‡∏¢‡∏≤‡∏¢ Torso (Player/NPC)
----------------------------
local function expandTorsoHitbox(character)
	if not character or not character:IsDescendantOf(Workspace) then return end
	local humanoid = character:FindFirstChildOfClass("Humanoid")
	if not humanoid then return end

	local torso = character:FindFirstChild("Torso") or character:FindFirstChild("UpperTorso")
	if torso and torso:IsA("BasePart") then
		torso.CanCollide = false
		torso.Transparency = CONFIG.TORSO_TRANSPARENCY
		torso.Massless = true
		torso.Size = CONFIG.TORSO_SIZE

		-- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° Highlight ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ
		if CONFIG.SHOW_HIGHLIGHT and not character:FindFirstChild("DXD_HitboxHighlight") then
			local hl = Instance.new("Highlight")
			hl.Name = "DXD_HitboxHighlight"
			hl.FillTransparency = 1
			hl.OutlineTransparency = 0
			hl.OutlineColor = CONFIG.HIGHLIGHT_COLOR
			hl.Parent = character
		end
	end
end

local function applyAllPlayers()
	for _, plr in ipairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer then
			local char = plr.Character or plr.CharacterAdded:Wait()
			expandTorsoHitbox(char)
		end
	end
end

local function applyAllNPCs()
	if not CONFIG.INCLUDE_NPCS then return end
	for _, model in ipairs(Workspace:GetDescendants()) do
		if model:IsA("Model") and model:FindFirstChildOfClass("Humanoid") then
			local isPlayerChar = Players:GetPlayerFromCharacter(model)
			if not isPlayerChar then
				expandTorsoHitbox(model)
			end
		end
	end
end

-- üîÅ ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ã‡πâ‡∏≥‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏á‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ß‡πâ‡∏ï‡∏•‡∏≠‡∏î
task.spawn(function()
	while task.wait(CONFIG.UPDATE_RATE) do
		applyAllPlayers()
		applyAllNPCs()
	end
end)

-- üßç ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
Players.PlayerAdded:Connect(function(plr)
	if plr ~= LocalPlayer then
		plr.CharacterAdded:Connect(expandTorsoHitbox)
	end
end)

----------------------------
-- üîê KEY CONFIG
----------------------------
local keyCode = "222554"
local keyFileName = "warp_key_cache.txt"

local canUseFile = (type(isfile) == "function") and (type(readfile) == "function") and (type(writefile) == "function")

local function getTodayString()
	local d = os.date("*t")
	return string.format("%04d-%02d-%02d", d.year, d.month, d.day)
end

local function hasValidKey()
	if not canUseFile then return false end
	if not isfile(keyFileName) then return false end
	local ok, content = pcall(readfile, keyFileName)
	if not ok or not content then return false end
	local parts = string.split(content, "|")
	return parts[1] == keyCode and parts[2] == getTodayString()
end

local function saveKey()
	if canUseFile then
		pcall(writefile, keyFileName, keyCode.."|"..getTodayString())
	end
end

----------------------------
-- üí• CLEANUP OLD GUI
----------------------------
pcall(function()
	for _, name in ipairs({"WarpControlGui", "KeySystem"}) do
		local g = LocalPlayer:FindFirstChild("PlayerGui"):FindFirstChild(name)
		if g then g:Destroy() end
	end
end)

----------------------------
-- üß± LOAD MAIN SCRIPT (WarpControl)
----------------------------
loadstring(game:HttpGet("https://raw.githubusercontent.com/wkdopajwiojf/Tploop/refs/heads/main/Tploop%20script%20with%20out%20hitbox"))()

print("‚úÖ DXD WarpControl (Classic Key Edition + Hitbox Highlight) Loaded Successfully.")
